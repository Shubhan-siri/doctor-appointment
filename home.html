<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Home â€” Product Finder</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <!-- LOGIN PROTECTION -->
  <script>
    if (!localStorage.getItem("loggedIn")) {
      window.location.href = "index.html";
    }
  </script>

  <div class="navbar">
    <h2>Product Finder</h2>
    <button class="logout-btn" onclick="logout()">Logout</button>
  </div>

  <div class="home-container">
    <h3>Welcome!</h3>
    <p>Find products by search or category</p>

    <input type="text" id="searchInput" placeholder="Enter product name..." />
    <button class="btn" onclick="searchProduct()">Search Product</button>

    <h4>OR</h4>

    <button class="btn category-btn" onclick="goCategory()">Select Category</button>
  </div>

  <script>
    function searchProduct() {
  const query = document.getElementById("searchInput").value.trim().toLowerCase();

  if (!query) {
    alert("Please enter product name!");
    return;
  }

  // Get all products from localStorage
  const products = JSON.parse(localStorage.getItem("products")) || [];

  // Filter products by name
  const filtered = products.filter(p => p.name.toLowerCase().includes(query));

  if (filtered.length === 0) {
    alert("No product found!");
    return;
  }

  // Save search results in localStorage to show in products.html
  localStorage.setItem("searchResult", JSON.stringify(filtered));

  // Redirect to products page
  window.location.href = "products.html";
}

    function goCategory() {
      window.location.href = "category.html";
    }

    function logout() {
      localStorage.removeItem("loggedIn");   // <-- FIXED
      window.location.href = "index.html";
    }
  </script>

</body>
</html>
